const testInitState = {
    content: [
        {
        "themeId" : 18,
        "name" : "Theme_#3319aad0-93c2-4718-9975-4ed7e0a88805",
        "access" : {
            "accessId" : 2,
            "name" : "private"
        },
        "staff" : {
            "staffId" : 1,
            "name" : "Daniel",
            "surname" : "Naroditsky",
            "position" : "System admin"
        },
        "course" : {
            "courseId" : 1,
            "name" : "Course_#1",
            "lms" : null
        },
        "created" : "2017-04-04 16:05 (+0300)"
    }, {
        "themeId" : 53,
        "name" : "Theme_#f7247a47-a190-4364-b11c-170ff93fdb39",
        "access" : {
            "accessId" : 1,
            "name" : "dep-private"
        },
        "staff" : {
            "staffId" : 1,
            "name" : "Daniel",
            "surname" : "Naroditsky",
            "position" : "System admin"
        },
        "course" : {
            "courseId" : 1,
            "name" : "Course_#1",
            "lms" : null
        },
        "created" : "2018-01-17 16:05 (+0200)"
    }, {
        "themeId" : 17,
        "name" : "Theme_#01814f8b-f836-4929-9a03-eb4f6006ee0d",
        "access" : {
            "accessId" : 1,
            "name" : "dep-private"
        },
        "staff" : {
            "staffId" : 1,
            "name" : "Daniel",
            "surname" : "Naroditsky",
            "position" : "System admin"
        },
        "course" : {
            "courseId" : 1,
            "name" : "Course_#1",
            "lms" : null
        },
        "created" : "2017-07-27 16:05 (+0300)"
    }, {
        "themeId" : 21,
        "name" : "Theme_#ceee578a-28e9-475a-9936-b8ceb31ced74",
        "access" : {
            "accessId" : 1,
            "name" : "dep-private"
        },
        "staff" : {
            "staffId" : 1,
            "name" : "Daniel",
            "surname" : "Naroditsky",
            "position" : "System admin"
        },
        "course" : {
            "courseId" : 2,
            "name" : "Course_#2",
            "lms" : null
        },
        "created" : "2018-08-28 16:05 (+0300)"
    }, {
        "themeId" : 55,
        "name" : "Theme_#1a7be286-4ef8-4fcf-bbda-b67cc60ad2a4",
        "access" : {
            "accessId" : 1,
            "name" : "dep-private"
        },
        "staff" : {
            "staffId" : 1,
            "name" : "Daniel",
            "surname" : "Naroditsky",
            "position" : "System admin"
        },
        "course" : {
            "courseId" : 2,
            "name" : "Course_#2",
            "lms" : null
        },
        "created" : "2018-07-31 16:05 (+0300)"
    }, {
        "themeId" : 24,
        "name" : "Theme_#3ad048c1-5777-45e4-aa35-89f99ca747b7",
        "access" : {
            "accessId" : 2,
            "name" : "private"
        },
        "staff" : {
            "staffId" : 2,
            "name" : "Alexander",
            "surname" : "Kosinsky",
            "position" : "Head"
        },
        "course" : {
            "courseId" : 2,
            "name" : "Course_#2",
            "lms" : null
        },
        "created" : "2016-12-20 16:05 (+0200)"
    }, {
        "themeId" : 19,
        "name" : "Theme_#6012f4d3-5bbc-4764-8cc9-b7d25113e1d2",
        "access" : {
            "accessId" : 1,
            "name" : "dep-private"
        },
        "staff" : {
            "staffId" : 2,
            "name" : "Alexander",
            "surname" : "Kosinsky",
            "position" : "Head"
        },
        "course" : {
            "courseId" : 2,
            "name" : "Course_#2",
            "lms" : null
        },
        "created" : "2019-08-21 16:05 (+0300)"
    }, {
        "themeId" : 39,
        "name" : "Theme_#61819adc-ecfe-491e-88f1-7f1aa14a3e0c",
        "access" : {
            "accessId" : 1,
            "name" : "dep-private"
        },
        "staff" : {
            "staffId" : 2,
            "name" : "Alexander",
            "surname" : "Kosinsky",
            "position" : "Head"
        },
        "course" : {
            "courseId" : 3,
            "name" : "Course_#3",
            "lms" : null
        },
        "created" : "2017-07-15 16:05 (+0300)"
    }, {
        "themeId" : 42,
        "name" : "Theme_#948fae31-1086-4d67-afd8-9906d9819721",
        "access" : {
            "accessId" : 2,
            "name" : "private"
        },
        "staff" : {
            "staffId" : 3,
            "name" : "Manuel",
            "surname" : "Sanches",
            "position" : "Instructor"
        },
        "course" : {
            "courseId" : 3,
            "name" : "Course_#3",
            "lms" : null
        },
        "created" : "2018-07-28 16:05 (+0300)"
    }, {
        "themeId" : 1,
        "name" : "Theme_#33809c8f-0a00-4313-b9df-c258a65850be",
        "access" : {
            "accessId" : 1,
            "name" : "dep-private"
        },
        "staff" : {
            "staffId" : 3,
            "name" : "Manuel",
            "surname" : "Sanches",
            "position" : "Instructor"
        },
        "course" : {
            "courseId" : 3,
            "name" : "Course_#3",
            "lms" : null
        },
        "created" : "2017-08-24 16:05 (+0300)"
    }, {
        "themeId" : 4,
        "name" : "Theme_#f0845dd1-24e3-4d42-a5d6-4606ffe04349",
        "access" : {
            "accessId" : 1,
            "name" : "dep-private"
        },
        "staff" : {
            "staffId" : 3,
            "name" : "Manuel",
            "surname" : "Sanches",
            "position" : "Instructor"
        },
        "course" : {
            "courseId" : 3,
            "name" : "Course_#3",
            "lms" : null
        },
        "created" : "2018-11-17 16:05 (+0200)"
    } ]
}

const initState = {
    content: null,
    isLoading: false,
    error: null
}

export const themesReducer = (state = initState, action) => {
    switch (action.type) {
        case "LOADING_ALL_THEMES": {
            return {...state, isLoading: action.isLoading};
        }
        case "LOADING_ALL_THEMES_FAILURE": {
            console.log("Error loading themes!", action.error);
            return {...state, error: action.error};
        }
        case "CLEAR_LOADING_ALL_THEMES_FAILURE": {
            return {...state, error: null};
        }
        case "UPDATING_THEME": {
            return {...state, isUpdating: action.isUpdating};
        }
        case "UPDATING_THEME_FAILURE": {
            console.log("Error updating a theme!", action.error);
            return {...state, errorUpdate: action.error};
        }
        case "CLEAR_UPDATING_THEME_FAILURE": {
            return {...state, errorUpdate: null};
        }
        case "CLEAR_ALL_THEMES_FAILURES": {
            return {...state, error: null, errorUpdate: null};
        }
        case "SET_THEME": {
            const { payload } = action;
            // Ensure content is initialized
            const content = (state.content || []).filter(item => item.id !== payload.themeId);
            content.push(payload);
            return {...state, content};
        }
        case "SET_ALL_THEMES": {
            const content = action.payload;
            return {...state, content};
        }
        case "ADD_THEME_IN_STORE": {
            const theme = action.payload;
            return {...state, content: [...state.content, theme]};
        }
        case "UPDATE_THEME_IN_STORE": {
            const theme = action.payload;
            return {...state, content: state.content.map(t => t.themeId === theme.themeId ? theme: t)};
        }
        case "UPDATE_THEME_NAME_IN_STORE": {
            const {themeId, name} = action;
            return {...state, content: state.content.map(t => t.themeId === themeId ? {...t, name} : t)}
        }
        case "DELETE_THEME_FROM_STORE": {
            const {themeId} = action;
            return {...state, content: state.content.filter(t => t.themeId !== themeId)}
        }
        default:
            return state;
    }
}